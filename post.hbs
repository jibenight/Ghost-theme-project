{{!< default}}
{{!-- The tag above means: insert everything in this file
into the {body} tag of the default.hbs template --}}
{{#post}}
{{!-- Everything inside the #post block pulls data from the post --}}
<article class="w-full bg-white rounded-3xl">   
    <div class=" {{#match @custom.post_image_style "Small"}} pt-6 {{/match}}">
        <figure>
            <img class="{{#match @custom.post_image_style "Full"}}w-full rounded-t-3xl{{/match}}{{#match @custom.post_image_style "Hidden"}} hidden{{/match}}{{#match @custom.post_image_style "Small"}} w-1/2 mx-auto{{/match}} sm:h-96 lg:h-[500px] object-cover"
                                srcset="{{img_url feature_image size="s"}} 300w,
                                        {{img_url feature_image size="m"}} 600w,
                                        {{img_url feature_image size="l"}} 1000w,
                                        {{img_url feature_image size="xl"}} 2000w"
                                sizes="(max-width: 1000px) 400px, 800px"
                                src="{{img_url feature_image size="m"}}"
                                alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}}{{/if}}"
                                loading="lazy"
                            />
            {{#if feature_image_caption}}
                <figcaption class="italic text-slate-400 {{#match @custom.post_image_style "Full"}}text-right pr-3 {{/match}} text-xs sm:text-sm {{#match @custom.post_image_style "Small"}} text-center {{/match}}">{{feature_image_caption}}</figcaption>
            {{/if}}
        </figure>
        <div class="p-8">
            <section class="m-auto xl:w-2/3">
                {{#primary_tag}}
                    <span class="text-lg font-bold" style="color:{{@site.accent_color}};">{{name}} </span>
                {{/primary_tag}}
                <span class="text-sm text-slate-500 italic"> 
                    &bull; 
                    <time datetime="{{date format="YYYY-MM-DD"}}">
                        {{date}}
                    </time>
                    &bull; 
                    {{#if reading_time}}
                        <span class="">
                            {{reading_time}}
                        </span>
                    {{/if}}
                    {{#if @site.comments_enabled}}
                        {{comment_count}}
                    {{/if}}
                </span>
                {{#primary_author}}
                        <p class="mt-2 italic text-slate-500">Author: <a href="{{url}}">{{name}}</a></p>
                {{/primary_author}}
                <h1 class="font-heading py-6 text-4xl lg:text-6xl text-slate-900 hover:text-slate-700 font-black">
                    {{#unless access}}
                        {{^has visibility="public"}}
                            {{#unless feature_image}}
                                {{> "icons/lock"}}
                            {{/unless}}
                        {{/has}}
                    {{/unless}}
                {{title}}
                </h1>
                <div class="post-content">
                    <article class="gh-content">
                        {{content}}
                    </article>
                </div>
            </section>
        </div>
    </div>
</article>
    
{{!-- A signup call to action is displayed here, unless viewed as a logged-in member --}}
{{> "newsletter"}}

{{!-- Read more links, just above the footer --}}
{{#if @custom.show_recent_posts_footer}}
    {{!-- This query gets the latest 3 posts on the site, but adds a filter to
    exclude the post we're currently on from being included. --}}
    {{#get "posts" filter="primary_tag:{{primary_tag.slug}}" limit="3" as |more_posts|}}
        {{#if more_posts}}
            <div class="flex flex-wrap post-feed mb-6 p-4 bg-slate-100  dark:bg-slate-800 rounded-3xl">
                {{#foreach posts}}
                    {{> "post-card"}}
                {{/foreach}}
            </div>
        {{/if}}
    {{/get}}
{{/if}}

{{/post}}